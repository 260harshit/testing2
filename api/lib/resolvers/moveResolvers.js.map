{"version":3,"sources":["../../../src/lib/resolvers/moveResolvers.ts"],"sourcesContent":["import { moves } from '#assets/moves';\nimport { mapMoveDataToMoveGraphQL } from '#mappers/moveMapper';\nimport type { Move } from '#types';\nimport { FuzzySearch } from '#utils/FuzzySearch';\nimport type { GraphQLSet } from '#utils/GraphQLSet';\nimport { preParseInput } from '#utils/util';\nimport { validateGetFuzzyMoveArgs, type GetFuzzyMoveArgs } from '#validations/fuzzyArgs/fuzzyMoveArgs';\nimport { validateGetMoveArgs, type GetMoveArgs } from '#validations/getMoveArgs';\n\nexport const fuzzySearch = new FuzzySearch(moves, ['name', 'aliases']);\n\n/**\n * Gets the details on a Pokémon move, using the move name\n */\nexport function getMove(args: GetMoveArgs, requestedFields: GraphQLSet<keyof Move>): Move {\n  args = validateGetMoveArgs(args);\n\n  const moveFromDataset = moves.get(args.move);\n\n  if (!moveFromDataset) {\n    throw new Error(`No move found for ${args.move}`);\n  }\n\n  const graphqlObject = mapMoveDataToMoveGraphQL({ data: moveFromDataset, requestedFields });\n\n  if (!graphqlObject) {\n    throw new Error(`Failed to get data for move: ${args.move}`);\n  }\n\n  return graphqlObject;\n}\n\n/**\n * Gets details on a Pokémon move, using a fuzzy search on name\n *\n * This can be used to find multiple results based on the query\n *\n * By default only 1 result is returned. You can provide the arguments `take`, `offset`, and `reverse` to modify this behaviour.\n */\nexport function getFuzzyMove(args: GetFuzzyMoveArgs, requestedFields: GraphQLSet<keyof Move>): Move[] {\n  args = validateGetFuzzyMoveArgs(args);\n\n  let { move } = args;\n  const { offset, reverse, take } = args;\n\n  move = preParseInput(move);\n\n  const fuzzyResult = fuzzySearch.runFuzzy(move);\n\n  if (reverse) {\n    fuzzyResult.reverse();\n  }\n\n  const fuzzyEntries = fuzzyResult.slice(offset!, offset! + take!);\n\n  if (!fuzzyEntries.length) {\n    throw new Error(`No moves found for: ${args.move}`);\n  }\n\n  const graphqlObjects = fuzzyEntries.map((moveData) => mapMoveDataToMoveGraphQL({ data: moveData, requestedFields }));\n\n  if (!graphqlObjects.length) {\n    throw new Error(`Failed to get data for move: ${args.move}`);\n  }\n\n  return graphqlObjects;\n}\n"],"mappings":";;AAAA,SAAS,aAAa;AACtB,SAAS,gCAAgC;AAEzC,SAAS,mBAAmB;AAE5B,SAAS,qBAAqB;AAC9B,SAAS,gCAAuD;AAChE,SAAS,2BAA6C;AAE/C,MAAM,cAAc,IAAI,YAAY,OAAO,CAAC,QAAQ,SAAS,CAAC;AAK9D,SAAS,QAAQ,MAAmB,iBAA+C;AACxF,SAAO,oBAAoB,IAAI;AAE/B,QAAM,kBAAkB,MAAM,IAAI,KAAK,IAAI;AAE3C,MAAI,CAAC,iBAAiB;AACpB,UAAM,IAAI,MAAM,qBAAqB,KAAK,MAAM;AAAA,EAClD;AAEA,QAAM,gBAAgB,yBAAyB,EAAE,MAAM,iBAAiB,gBAAgB,CAAC;AAEzF,MAAI,CAAC,eAAe;AAClB,UAAM,IAAI,MAAM,gCAAgC,KAAK,MAAM;AAAA,EAC7D;AAEA,SAAO;AACT;AAhBgB;AAyBT,SAAS,aAAa,MAAwB,iBAAiD;AACpG,SAAO,yBAAyB,IAAI;AAEpC,MAAI,EAAE,KAAK,IAAI;AACf,QAAM,EAAE,QAAQ,SAAS,KAAK,IAAI;AAElC,SAAO,cAAc,IAAI;AAEzB,QAAM,cAAc,YAAY,SAAS,IAAI;AAE7C,MAAI,SAAS;AACX,gBAAY,QAAQ;AAAA,EACtB;AAEA,QAAM,eAAe,YAAY,MAAM,QAAS,SAAU,IAAK;AAE/D,MAAI,CAAC,aAAa,QAAQ;AACxB,UAAM,IAAI,MAAM,uBAAuB,KAAK,MAAM;AAAA,EACpD;AAEA,QAAM,iBAAiB,aAAa,IAAI,CAAC,aAAa,yBAAyB,EAAE,MAAM,UAAU,gBAAgB,CAAC,CAAC;AAEnH,MAAI,CAAC,eAAe,QAAQ;AAC1B,UAAM,IAAI,MAAM,gCAAgC,KAAK,MAAM;AAAA,EAC7D;AAEA,SAAO;AACT;AA3BgB;","names":[]}